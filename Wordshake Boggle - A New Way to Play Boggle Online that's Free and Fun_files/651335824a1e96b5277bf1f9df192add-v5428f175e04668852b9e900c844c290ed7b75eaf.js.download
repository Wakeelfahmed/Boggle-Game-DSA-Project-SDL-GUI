/*!/wp-content/themes/boggleonline/boggle-page.js*/
var friendChallenge=!1;var showingAWord=!1;var timedGame=!1;var started=!1;var board=[];var sizeOfGrid=4;var dice1=['a','a','e','e','g','n'];var dice2=['e','l','r','t','t','y'];var dice3=['a','o','o','t','t','w'];var dice4=['a','b','b','j','o','o'];var dice5=['e','h','r','t','v','w'];var dice6=['c','i','m','o','t','u'];var dice7=['d','i','s','t','t','y'];var dice8=['e','i','o','s','s','t'];var dice9=['d','e','l','r','v','y'];var dice10=['a','c','h','o','p','s'];var dice11=['h','i','m','n','u','q'];var dice12=['e','e','i','n','s','u'];var dice13=['e','e','g','h','n','w'];var dice14=['a','f','f','k','p','s'];var dice15=['h','l','n','n','r','z'];var dice16=['d','e','i','l','r','x'];function getParam(name){var results=new RegExp('[\?&]'+name+'=([^&#]*)').exec(window.location.href);if(results==null){return null}
return decodeURI(results[1])||0}
function shuffle(array){var currentIndex=array.length,temporaryValue,randomIndex;while(0!==currentIndex){randomIndex=Math.floor(Math.random()*currentIndex);currentIndex-=1;temporaryValue=array[currentIndex];array[currentIndex]=array[randomIndex];array[randomIndex]=temporaryValue}
return array}
function loadNewGame(size){jQuery('.progress-text.front').css('clip-path','inset(0px 0px 0px 0%)');jQuery('.check-mark, .progress-wrap, .timer-wrap, .end-the-game, .num-words-found').hide();jQuery('.all-the-words').removeClass('show');jQuery('.right-side').show();jQuery('.words').html('');score=0;jQuery('#score span').html(score);wordCount=0;jQuery('.wrapper .spinner, .wrapper .filler').css('animation','none');clearInterval(countDownInterval);jQuery('.letter, #letter-board').removeClass('three-grid');jQuery('.word-wrap').removeClass('game-complete');jQuery('.letter, .connector').removeClass('in-play');jQuery('.selected').removeClass('selected');jQuery('.connector').removeClass('up down right left upright upleft downright downleft');isTapping=!1;var validBoard=!1;var words=[];do{if(size==3){jQuery('.letter, #letter-board').addClass('three-grid');var l1=dice1[Math.floor(Math.random()*dice1.length)];var l2=dice2[Math.floor(Math.random()*dice2.length)];var l3=dice3[Math.floor(Math.random()*dice3.length)];var l4=dice4[Math.floor(Math.random()*dice4.length)];var l5=dice5[Math.floor(Math.random()*dice5.length)];var l6=dice6[Math.floor(Math.random()*dice6.length)];var l7=dice7[Math.floor(Math.random()*dice7.length)];var l8=dice8[Math.floor(Math.random()*dice8.length)];var l9=dice9[Math.floor(Math.random()*dice9.length)];var letters=[l1,l2,l3,l4,l5,l6,l7,l8,l9];shuffle(letters);board=[[letters[0],letters[1],letters[2]],[letters[3],letters[4],letters[5]],[letters[6],letters[7],letters[8]]];validBoard=!0}else{var l1=dice1[Math.floor(Math.random()*dice1.length)];var l2=dice2[Math.floor(Math.random()*dice2.length)];var l3=dice3[Math.floor(Math.random()*dice3.length)];var l4=dice4[Math.floor(Math.random()*dice4.length)];var l5=dice5[Math.floor(Math.random()*dice5.length)];var l6=dice6[Math.floor(Math.random()*dice6.length)];var l7=dice7[Math.floor(Math.random()*dice7.length)];var l8=dice8[Math.floor(Math.random()*dice8.length)];var l9=dice9[Math.floor(Math.random()*dice9.length)];var l10=dice10[Math.floor(Math.random()*dice10.length)];var l11=dice11[Math.floor(Math.random()*dice11.length)];var l12=dice12[Math.floor(Math.random()*dice12.length)];var l13=dice13[Math.floor(Math.random()*dice13.length)];var l14=dice14[Math.floor(Math.random()*dice14.length)];var l15=dice15[Math.floor(Math.random()*dice15.length)];var l16=dice16[Math.floor(Math.random()*dice16.length)];var letters=[l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l14,l15,l16];shuffle(letters);board=[[letters[0],letters[1],letters[2],letters[3]],[letters[4],letters[5],letters[6],letters[7]],[letters[8],letters[9],letters[10],letters[11]],[letters[12],letters[13],letters[14],letters[15]]]}
words=solveBoard(board,dictionaryTrie,size).sort(function(a,b){if(a.length==b.length){return(a<b)?1:-1}
return b.length-a.length});var longest=words.reduce(function(a,b){return a.length>b.length?a:b});if(longest.length>=7){validBoard=!0}else{console.log('notvalid')}}
while(!validBoard);var i=0;for(var i=0;i<letters.length;i++){jQuery('span[data-square="'+i+'"]').text(letters[i]).parent().addClass('in-play');jQuery('.connector[data-square="'+i+'"]').addClass('in-play')}
words=words.filter(function(item,idx,arr){return idx==arr.indexOf(item)});words=words.filter(function(val){return(val.length>2?!0:!1)});putWordsIntoTicker(words);wordsArray=words;jQuery('.shaking-tiles').text('').removeClass('show');jQuery('.in-play').addClass('rise-up');setTimeout(function(){if(timedGame){jQuery('.timer-wrap').show();started=!0;count=60;startCountDown();jQuery('.timer-wrap').show();jQuery('.timer').text("60");jQuery('.timer-wrap').addClass('splash active');setTimeout(function(){jQuery('.timer-wrap').removeClass('splash active')},500);jQuery('.upper-content, .controls-header, .size-of-grid, .timed-or-untimed, .user-stats, .word-bank-header').addClass('show');jQuery('.in-play').addClass('show').removeClass('rise-up');jQuery('#letter-board').addClass('show').removeClass('hello')}else{wordGoal=totalPossibleWords;jQuery('.end-the-game, .num-words-found').show();jQuery('.num-found').text(0);jQuery('.total-possible').text(totalPossibleWords);jQuery('.in-play').addClass('show');jQuery('.turn-board, .reveal-word').addClass('show')}
jQuery('.score').show();jQuery('.boosters').show();jQuery('.word-ticker').addClass('show');jQuery('#letter-board').removeClass('no-touch')},900)}
function loadFriendGame(board){var size=4;var words=[];var letters=board.split("");board=[[letters[0],letters[1],letters[2],letters[3]],[letters[4],letters[5],letters[6],letters[7]],[letters[8],letters[9],letters[10],letters[11]],[letters[12],letters[13],letters[14],letters[15]]];words=solveBoard(board,dictionaryTrie,size).sort(function(a,b){if(a.length==b.length){return(a<b)?1:-1}
return b.length-a.length});var i=0;for(var i=0;i<letters.length;i++){jQuery('span[data-square="'+i+'"]').text(letters[i]).parent().addClass('in-play');jQuery('.connector[data-square="'+i+'"]').addClass('in-play')}
words=words.filter(function(item,idx,arr){return idx==arr.indexOf(item)});words=words.filter(function(val){return(val.length>2?!0:!1)});putWordsIntoTicker(words);wordsArray=words;jQuery('.in-play').addClass('rise-up');setTimeout(function(){jQuery('.timer-wrap').show();started=!0;count=60;startCountDown();jQuery('.timer').text("60");jQuery('.timer-wrap').addClass('splash active').show();setTimeout(function(){jQuery('.timer-wrap').removeClass('splash active')},500)},900)}
function endOfGame(notComplete){clearBoard();jQuery('.right-side').hide();if(timedGame){jQuery('.praise').addClass('praise-show').html('TIMES UP!');setTimeout(function(){jQuery('.praise').removeClass('praise-show').html('')},700);clearInterval(countDownInterval);jQuery('.send-to-friend').show();var t='timed'}else{if(notComplete==0){}else{if(audioLoaded){jQuery('.trumpets')[0].play()}
jQuery('.praise').addClass('praise-show').html("YOU FOUND ALL THE WORDS!");setTimeout(function(){jQuery('.praise').removeClass('praise-show').html('')},700)}
jQuery('.send-to-friend').hide();var t='untimed'}
if(friendChallenge){if(score>getParam('score')){jQuery('.friend-results').append('You Beat '+getParam('u')+'!')}else{jQuery('.friend-results').append('You Lost');jQuery('.friend-results').append('<br>Good game.')}
jQuery('.friend-results').append('<p>'+getParam('u')+' scored '+getParam('score')+' points on this board.</p>');friendChallenge=!1}
var biggestWord=processFoundWords();jQuery('.word').hide();jQuery('.all-the-words').addClass('show');var percentageFound=(wordCount-allHints.length)/totalPossibleWords*100;percentageFound=percentageFound.toFixed(1);if(percentageFound<0){percentageFound=0}
if(timedGame){jQuery('.biggest-word').text(biggestWord);jQuery('#end-screen-points').text(score);jQuery('.your-percentage').hide()}else{jQuery('.your-percentage').text(percentageFound+'%').show();jQuery('.biggest-word').text(biggestWord);jQuery('#end-screen-points').text(score)}
setTimeout(function(){showDropdown(jQuery('.end-screen-message'));if(audioLoaded){jQuery('.whoosh')[0].play()}
setTimeout(function(){addPointsToBar(jQuery('#end-screen-points'),score);if(timedGame){if(score>parseInt(jQuery('.boggle-high-score').html())){jQuery('.boggle-high-score').html(score).addClass('splash')}}else{if(percentageFound>parseFloat(jQuery('.boggle-high-percentage').html())){jQuery('.boggle-high-percentage').html(percentageFound+'%').addClass('splash')}}
if(biggestWord.length>jQuery('.boggle-biggest-word').text().length){jQuery('.boggle-biggest-word').text(biggestWord).addClass('splash')}
setTimeout(function(){jQuery('.boggle-high-score, .boggle-high-percentage, .boggle-biggest-word').removeClass('splash')},500);jQuery('.play-again').addClass('show');jQuery('.go').addClass('highlight')},500)},200);jQuery.ajax({url:ajaxurl,data:{'action':'update_boggle_score','timed':t,'score':score,'percentage':percentageFound,'biggestWord':biggestWord},success:function(){jQuery.ajax({url:ajaxurl,data:{'action':'show_boggle_leaderboard'},success:function(data){jQuery('.boggle-leaderboard').html(data);console.log('leaderboard updated')},error:function(xhr,error){console.debug(xhr);console.debug(error)}})},error:function(xhr,error){console.debug(xhr);console.debug(error)}})}
window.addEventListener('load',function(){jQuery('.button').mousedown(function(){if(audioLoaded){jQuery('.soft-pop')[0].play()}});jQuery('.timer-wrap, a:not(.button), .account, .close-x').click(function(){if(audioLoaded){jQuery('.click')[0].play()}});var lazyloadImages=document.querySelectorAll("img.lazy");lazyloadImages.forEach(function(img){img.src=img.dataset.src});var lazyloadImages=document.querySelectorAll("img.timed-lazy");lazyloadImages.forEach(function(img){img.src=img.dataset.src})});jQuery(document).ready(function(){jQuery('.send-to-friend').click(function(){var boardParam='';jQuery('.letter.in-play').each(function(){boardParam+=jQuery(this).children().text()});var username=jQuery('.username').text();if(username==''){username='Player'}
var friendUrl=window.location.origin+'/boggle?b='+boardParam+'&u='+username+'&score='+score;jQuery('#friendUrl').val(friendUrl).show().focus().select()});if(getParam('u')&&getParam('b')&&getParam('score')){friendChallenge=!0;var userParam=getParam('u');jQuery('.friend-greeting').html("You've been challenged by "+userParam+"!").show();jQuery('.start-untimed-game, .welcome .close-x').remove();jQuery('.start-timed-game').text('BEGIN!');timedGame=!0;jQuery('.send-to-friend').hide();showWelcome()}
jQuery('.send-to-friend .button').click(function(){jQuery('.url-desc').show()});jQuery('.end-the-game').click(function(){jQuery(this).hide();endOfGame(0)});jQuery.ajax({type:"GET",url:window.location.origin+"/wp-content/themes/boggleonline/enable2k.txt",success:function(data){console.log('success on ajax library');var words=data.split('\n');for(var i=words.length-1;i>=0;i--){dictionaryTrie.insert(words[i])}
console.log('dictionary loaded');if(friendChallenge){}else{if(getCookie('welcome-boggle')){loadNewGame(sizeOfGrid)}}}});jQuery('.size-of-grid').click(function(){jQuery('.three-by-three, .four-by-four').toggleClass('active');jQuery('.go').addClass('highlight');if(audioLoaded){jQuery('.click')[0].play()}});jQuery('.timed-or-untimed').click(function(){jQuery('.timed, .untimed').toggleClass('active');jQuery('.go').addClass('highlight');if(audioLoaded){jQuery('.click')[0].play()}});jQuery('.go').click(function(){if(friendChallenge){jQuery('.friend-results').hide();friendChallenge=!1;console.log('hidden')}
resetProgressSVG();jQuery('.play-again, .word-bank').removeClass('show');jQuery('.go').removeClass('highlight');jQuery('.word').text('').show();if(showingAWord){clearWordReveal()}
jQuery('.end-screen-message').removeClass('dropdown');if(audioLoaded){jQuery('.whoosh')[0].play();jQuery('.shaker')[0].play()}
if(jQuery('.four-by-four').hasClass('active')){sizeOfGrid=4}else{sizeOfGrid=3}
if(jQuery('.timed').hasClass('active')){timedGame=!0}else{timedGame=!1}
loadNewGame(sizeOfGrid)});jQuery('.start-timed-game').click(function(){resetProgressSVG();jQuery('.play-again, .word-bank').removeClass('show');jQuery('.go').removeClass('highlight');jQuery('.word').text('').show();if(showingAWord){clearWordReveal()}
if(friendChallenge){loadFriendGame(getParam('b'));return}
if(audioLoaded){jQuery('.shaker')[0].play()}
if(jQuery('.four-by-four').hasClass('active')){sizeOfGrid=4}else{sizeOfGrid=3}
jQuery('.timed').addClass('active');jQuery('.untimed').removeClass('active');timedGame=!0;loadNewGame(sizeOfGrid)});jQuery('.start-untimed-game, .welcome .close-x').click(function(){resetProgressSVG();jQuery('.play-again, .word-bank').removeClass('show');jQuery('.go').removeClass('highlight');jQuery('.word').text('').show();if(showingAWord){clearWordReveal()}
if(friendChallenge){loadFriendGame(getParam('b'));return}
if(audioLoaded){jQuery('.shaker')[0].play()}
if(jQuery('.four-by-four').hasClass('active')){sizeOfGrid=4}else{sizeOfGrid=3}
jQuery('.timed').removeClass('active');jQuery('.untimed').addClass('active');timedGame=!1;loadNewGame(sizeOfGrid)})})
;